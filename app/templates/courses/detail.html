{% extends "base.html" %}
{% block title %}课程详情{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h1 class="h4 mb-0">{{ course.name }}</h1>
      <div class="text-muted small">课程编号：{{ course.code }}</div>
    </div>
    <div class="btn-group">
      <a class="btn btn-outline-primary" href="{{ url_for('courses.edit_course', course_id=course.id) }}">编辑</a>
      <a class="btn btn-outline-secondary" href="{{ url_for('courses.manage_schedule', course_id=course.id) }}">课表管理</a>
      <a class="btn btn-outline-secondary" href="{{ url_for('courses.assign_students', course_id=course.id) }}">选课学生</a>
    </div>
  </div>
  <div class="row g-3">
    <div class="col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <p class="mb-1"><span class="text-muted">学分：</span>{{ course.credit }}</p>
          <p class="mb-1"><span class="text-muted">授课教师：</span>{{ course.teacher.name if course.teacher else '待定' }}</p>
          <p class="mb-1"><span class="text-muted">所属班级：</span>{{ course.classroom.name if course.classroom else '无' }}</p>
          <p class="mb-0"><span class="text-muted">课程简介：</span>{{ course.description or '暂无' }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm">
        <div class="card-header">课表安排</div>
        <div class="card-body">
          {% if schedules %}
            <ul class="list-group list-group-flush">
              {% for schedule in schedules %}
                <li class="list-group-item">周{{ ['一','二','三','四','五','六','日'][schedule.weekday] }} {{ schedule.start_time.strftime('%H:%M') }} - {{ schedule.end_time.strftime('%H:%M') }} {{ schedule.location or '' }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="text-muted">暂无课表</div>
          {% endif %}
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm">
        <div class="card-header">选课学生 ({{ students|length }})</div>
        <div class="card-body">
          {% if students %}
            <ul class="list-group list-group-flush">
              {% for student in students %}
                <li class="list-group-item">{{ student.name }} ({{ student.student_number }})</li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="text-muted">暂无学生选课</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
