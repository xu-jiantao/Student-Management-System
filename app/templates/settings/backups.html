{% extends "base.html" %}
{% block title %}数据备份{% endblock %}
{% block content %}
  <h1 class="h4 mb-3">数据备份</h1>
  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <form method="post" class="d-flex justify-content-between align-items-center">
        <input type="hidden" name="user_id" value="{{ current_user.id }}">
        <span>点击创建最新备份（示例为本地文件模拟）</span>
        <button type="submit" class="btn btn-primary">创建备份</button>
      </form>
    </div>
  </div>
  <div class="card shadow-sm">
    <div class="card-header">历史备份</div>
    <div class="table-responsive">
      <table class="table mb-0">
        <thead class="table-light"><tr><th>文件名</th><th>创建时间</th><th>操作</th></tr></thead>
        <tbody>
          {% for backup in backups %}
            <tr>
              <td>{{ backup.filename }}</td>
              <td>{{ backup.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
              <td><a class="btn btn-sm btn-outline-secondary" href="{{ url_for('settings.download_backup', backup_id=backup.id) }}">下载</a></td>
            </tr>
          {% else %}
            <tr><td colspan="3" class="text-center text-muted py-4">暂无备份记录</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
